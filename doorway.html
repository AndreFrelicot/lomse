<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Lomse library API: The LomseDoorway class</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Lomse library API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Overview</span></a></li>
      <li class="current"><a href="pages.html"><span>Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('doorway.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">The <a class="el" href="classLomseDoorway.html">LomseDoorway</a> class </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="el" href="classLomseDoorway.html">LomseDoorway</a> is the main interface with the Lomse library.</p>
<p>The interesting part in <code>MyFrame</code> constructor is the initialization of the Lomse library. As Lomse renders music scores on a bitmap it is necessary to inform Lomse about the bitmap format to use, and about other related parameters that are platform dependent. As explained, for wxWidgets applications I've found that using a wxImage as bitmap buffer is a good strategy, as <code>wxImage</code> is a platform independent class and contains a buffer for a bitmap in RGB, 24 bits format.</p>
<p>Apart of specifying the bitmap format to use, Lomse needs to know the resolution to use and the y-axis orientation. In our application, the scores are going to be shown on screen. Therefore, we can use a value of 96ppi, typical for Linux and Windows systems. In a real application, probably you should get this value by invoking some operating system related methods (i.e. <code>wxDC::GetPPI()</code> method).</p>
<p>As to the y-axis orientation, Lomse needs to know if your presentation device follows the standard convention used in screen displays in which the y coordinates increases downwards, that is, y-axis coordinate 0 is at top of screen and increases downwards to bottom of screen. This convention is just the opposite of the normal convention for geometry, in which 0 coordinate is at bottom of paper and increases upwards. Lomse follows the standard convention used in displays (y-axis 0 coordinate at top and increases downwards). Therefore, in our application, we have to inform Lomse that the y-axis follows the standard convention for screens and, therefore, we won't Lomse to reverse it.</p>
<p>One we have decided on the values to use, let's write the code:</p>
<div class="fragment"><div class="line"><span class="comment">//the pixel format</span></div>
<div class="line"><span class="keywordtype">int</span> pixel_format = k_pix_format_rgb24;  <span class="comment">//RGB 24bits</span></div>
<div class="line"></div>
<div class="line"><span class="comment">//the desired resolution. For Linux and Windows 96 pixels per inch works ok.</span></div>
<div class="line"><span class="keywordtype">int</span> resolution = 96;    <span class="comment">//96 ppi</span></div>
<div class="line"></div>
<div class="line"><span class="comment">//Normal y axis direction is 0 coordinate at top and increase downwards. You</span></div>
<div class="line"><span class="comment">//must specify if you would like just the opposite behavior. For Windows and</span></div>
<div class="line"><span class="comment">//Linux the default behavior is the right behavior.</span></div>
<div class="line"><span class="keywordtype">bool</span> reverse_y_axis = <span class="keyword">false</span>;</div>
<div class="line"></div>
<div class="line"><span class="comment">//initialize the library with these values</span></div>
<div class="line">m_lomse.init_library(pixel_format,resolution, reverse_y_axis);</div>
</div><!-- fragment --><p>With this, we have finished Lomse initialization. Here is the full code:</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> MyFrame::initialize_lomse()</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Lomse knows nothing about windows. It renders everything on bitmaps and the</span></div>
<div class="line">    <span class="comment">// user application uses them. For instance, to display it on a wxWindows.</span></div>
<div class="line">    <span class="comment">// Lomse supports a lot of bitmap formats and pixel formats. Therefore, before</span></div>
<div class="line">    <span class="comment">// using the Lomse library you MUST specify which bitmap format to use.</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// For wxWidgets, I would suggest using a platform independent format. So</span></div>
<div class="line">    <span class="comment">// I will use a wxImage as the rendering  buffer. wxImage is platform independent</span></div>
<div class="line">    <span class="comment">// and its buffer is an array of characters in RGBRGBRGB... format,  in the</span></div>
<div class="line">    <span class="comment">// top-to-bottom, left-to-right order. That is, the first RGB triplet corresponds</span></div>
<div class="line">    <span class="comment">// to the first pixel of the first row; the second RGB triplet, to the second</span></div>
<div class="line">    <span class="comment">// pixel of the first row, and so on until the end of the first row,</span></div>
<div class="line">    <span class="comment">// with second row following after it and so on.</span></div>
<div class="line">    <span class="comment">// Therefore, the pixel format is RGB 24 bits.</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// Let&#39;s define the required information:</span></div>
<div class="line"></div>
<div class="line">        <span class="comment">//the pixel format</span></div>
<div class="line">        <span class="keywordtype">int</span> pixel_format = k_pix_format_rgb24;  <span class="comment">//RGB 24bits</span></div>
<div class="line"></div>
<div class="line">        <span class="comment">//the desired resolution. For Linux and Windows 96 pixels per inch works ok.</span></div>
<div class="line">        <span class="keywordtype">int</span> resolution = 96;    <span class="comment">//96 ppi</span></div>
<div class="line"></div>
<div class="line">        <span class="comment">//Normal y axis direction is 0 coordinate at top and increase downwards. You</span></div>
<div class="line">        <span class="comment">//must specify if you would like just the opposite behavior. For Windows and</span></div>
<div class="line">        <span class="comment">//Linux the default behavior is the right behavior.</span></div>
<div class="line">        <span class="keywordtype">bool</span> reverse_y_axis = <span class="keyword">false</span>;</div>
<div class="line"></div>
<div class="line">    <span class="comment">//initialize the library with these values</span></div>
<div class="line">    m_lomse.init_library(pixel_format,resolution, reverse_y_axis);</div>
<div class="line">}</div>
</div><!-- fragment --><p>A wxWidgets application does not have a <em>main</em> procedure; the equivalent is the wxApp::OnInit member defined for a class derived from wxApp.</p>
<p><em>OnInit</em> will usually create a top window as a bare minimum. Unlike in earlier versions of wxWidgets, OnInit does not return a frame. Instead it returns a boolean value which indicates whether processing should continue () or not ().</p>
<p>Note that the program's command line arguments, represented by <em>argc</em> and <em>argv</em>, are available from within wxApp member functions.</p>
<p>An application closes by destroying all windows. Because all frames must be destroyed for the application to exit, it is advisable to use parent frames wherever possible when creating new frames, so that deleting the top level frame will automatically delete child frames. The alternative is to explicitly delete child frames in the top-level frame's wxCloseEvent handler.</p>
<p>In emergencies the wxExit function can be called to kill the application however normally the application shuts down automatically, see overview_app_shutdown. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Mar 9 2016 15:45:52 for Lomse library API by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
